{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\n\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nconst dateTimePicker = document.querySelector(\"#datetime-picker\");\r\nconst startBtn = document.querySelector(\"button[data-start]\");\r\nconst dataDays = document.querySelector(\"[data-days]\");\r\nconst dataHours = document.querySelector(\"[data-hours]\");\r\nconst dataMinutes = document.querySelector(\"[data-minutes]\");\r\nconst dataSeconds = document.querySelector(\"[data-seconds]\");\r\n\r\nclass Timer {\r\n  constructor({ onTick }) {\r\n    startBtn.disabled = true;\r\n    this.onTick = onTick;\r\n    this.userSelectedDate = null;\r\n    this.timerInterval = null; \r\n        \r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    const options = {\r\n      enableTime: true,\r\n      time_24hr: true,\r\n      defaultDate: new Date(),\r\n      minuteIncrement: 1,\r\n      onClose: (selectedDates) => {\r\n        const selectedDate = selectedDates[0];\r\n        const now = new Date();\r\n\r\n        if (selectedDate <= now) {\r\n          iziToast.error({\r\n            title: \"Error\",\r\n            message: \"Please choose a date in the future\",\r\n            position: \"topRight\",\r\n            backgroundColor: \"#ef4040\",\r\n            titleColor: \"#fff\",\r\n            messageColor: \"#fff\",\r\n            class: \"icon-svg-success\",\r\n            iconUrl: \"/img/error.svg\",\r\n          });\r\n          startBtn.disabled = true;\r\n        } else {\r\n          this.userSelectedDate = selectedDate;\r\n          startBtn.disabled = false;\r\n        }\r\n      },\r\n    };\r\n\r\n    flatpickr(\"#datetime-picker\", options);\r\n  }\r\n\r\n  start() {\r\n    if (!this.userSelectedDate || startBtn.disabled) {\r\n      return;\r\n    }\r\n\r\n    startBtn.disabled = true;\r\n    \r\n    this.timerInterval = setInterval(() => {\r\n      const curentTime = Date.now();\r\n      const resultTime = this.userSelectedDate - curentTime;\r\n\r\n      if (resultTime <= 0) {\r\n        clearInterval(this.timerInterval);\r\n        this.onTick(this.convertMs(0)); \r\n        return;\r\n      }\r\n\r\n      const ms = this.convertMs(resultTime);\r\n      this.onTick(ms);\r\n    }, 1000);\r\n  }\r\n\r\n  convertMs(ms) {\r\n    const second = 1000;\r\n    const minute = second * 60;\r\n    const hour = minute * 60;\r\n    const day = hour * 24;\r\n\r\n    const days = Math.floor(ms / day);\r\n    const hours = Math.floor((ms % day) / hour);\r\n    const minutes = Math.floor(((ms % day) % hour) / minute);\r\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n    return { days, hours, minutes, seconds };\r\n  }\r\n}\r\n\r\nconst timer = new Timer({\r\n  onTick: updateTimerDisplay,\r\n});\r\n\r\nstartBtn.addEventListener(\"click\", () => timer.start());\r\n\r\nfunction updateTimerDisplay({ days, hours, minutes, seconds }) {\r\n  dataDays.textContent = pad(days);\r\n  dataHours.textContent = pad(hours);\r\n  dataMinutes.textContent = pad(minutes);\r\n  dataSeconds.textContent = pad(seconds);\r\n}\r\n\r\nfunction pad(value) {\r\n  return String(value).padStart(2, \"0\");\r\n}\r\n\r\n"],"names":["startBtn","dataDays","dataHours","dataMinutes","dataSeconds","Timer","onTick","flatpickr","selectedDates","selectedDate","iziToast","curentTime","resultTime","ms","days","hours","minutes","seconds","timer","updateTimerDisplay","pad","value"],"mappings":"+IAMuB,SAAS,cAAc,kBAAkB,EAChE,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,MAAMC,CAAM,CACV,YAAY,CAAE,OAAAC,GAAU,CACtBN,EAAS,SAAW,GACpB,KAAK,OAASM,EACd,KAAK,iBAAmB,KACxB,KAAK,cAAgB,KAErB,KAAK,KAAI,CACV,CAED,MAAO,CA6BLC,EAAU,mBA5BM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAUC,GAAkB,CAC1B,MAAMC,EAAeD,EAAc,CAAC,EAGhCC,GAFQ,IAAI,MAGdC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,gBAAiB,UACjB,WAAY,OACZ,aAAc,OACd,MAAO,mBACP,QAAS,gBACrB,CAAW,EACDV,EAAS,SAAW,KAEpB,KAAK,iBAAmBS,EACxBT,EAAS,SAAW,GAEvB,CACP,CAEyC,CACtC,CAED,OAAQ,CACF,CAAC,KAAK,kBAAoBA,EAAS,WAIvCA,EAAS,SAAW,GAEpB,KAAK,cAAgB,YAAY,IAAM,CACrC,MAAMW,EAAa,KAAK,MAClBC,EAAa,KAAK,iBAAmBD,EAE3C,GAAIC,GAAc,EAAG,CACnB,cAAc,KAAK,aAAa,EAChC,KAAK,OAAO,KAAK,UAAU,CAAC,CAAC,EAC7B,MACD,CAED,MAAMC,EAAK,KAAK,UAAUD,CAAU,EACpC,KAAK,OAAOC,CAAE,CACf,EAAE,GAAI,EACR,CAED,UAAUA,EAAI,CAMZ,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACH,CAEA,MAAMC,EAAQ,IAAIb,EAAM,CACtB,OAAQc,CACV,CAAC,EAEDnB,EAAS,iBAAiB,QAAS,IAAMkB,EAAM,MAAO,CAAA,EAEtD,SAASC,EAAmB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7DhB,EAAS,YAAcmB,EAAIN,CAAI,EAC/BZ,EAAU,YAAckB,EAAIL,CAAK,EACjCZ,EAAY,YAAciB,EAAIJ,CAAO,EACrCZ,EAAY,YAAcgB,EAAIH,CAAO,CACvC,CAEA,SAASG,EAAIC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}